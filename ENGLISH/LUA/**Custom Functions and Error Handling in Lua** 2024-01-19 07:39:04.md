```lua
-- 1. **Fibonacci Sequence Generator**

fib = function (n)
  if n <= 1 then
    return n
  else
    return fib(n-1) + fib(n-2)
  end
end

-- Example usage:
for i = 1, 10 do
  print(fib(i)) -- Outputs the Fibonacci sequence: 1 1 2 3 5 8 13 21 34 55
end


-- 2. **Prime Number Checker**

is_prime = function (n)
  if n <= 1 then
    return false
  elseif n <= 3 then
    return true
  elseif n % 2 == 0 or n % 3 == 0 then
    return false
  else
    i = 5
    while i * i <= n do
      if n % i == 0 or n % (i+2) == 0 then
        return false
      end
      i = i + 6
    end
    return true
  end
end

-- Example usage:
for i = 1, 100 do
  if is_prime(i) then
    print(i) -- Outputs prime numbers from 1 to 100
  end
end


-- 3. **Recursive Directory Traversal**

traverse_directory = function (dir)
  for file in io.popen('find ' .. dir .. ' -type f'):lines() do
    print(file)
  end
  for subdir in io.popen('find ' .. dir .. ' -type d'):lines() do
    traverse_directory(subdir)
  end
end

-- Example usage:
traverse_directory("/path/to/directory") -- Recursively prints all files and subdirectories in the given directory


-- 4. **Custom Table Sorting**

sort_table = function (table, key)
  table.sort(function (a, b)
    if key then
      return a[key] < b[key]
    else
      return a < b
    end
  end)
end

-- Example usage:
local table = {{name="John", age=30}, {name="Mary", age=25}, {name="Bob", age=40}}
sort_table(table, "age") -- Sorts the table by the "age" key
for i, person in ipairs(table) do
  print(person.name, person.age) -- Outputs: Mary 25, John 30, Bob 40
end


-- 5. **Custom String Formatting**

format_string = function (str, ...)
  local args = {...}
  return str:format(args)
end

-- Example usage:
local name = "John"
local age = 30
local formatted_string = format_string("Hello, my name is %s and I am %d years old.", name, age)
print(formatted_string) -- Outputs: Hello, my name is John and I am 30 years old.


-- 6. **Custom Error Handling**

protected_call = function (f, ...)
  local result, err = xpcall(f, ...)
  if not result then
    error(err)
  end
  return result
end

-- Example usage:
local function divide(a, b)
  if b == 0 then
    error("Division by zero")
  end
  return a / b
end

local result = protected_call(divide, 10, 2)
print(result) -- Outputs: 5

result = protected_call(divide, 10, 0) -- Generates an error: Division by zero
```

**Explanation:**

1. The Fibonacci sequence generator calculates the Fibonacci numbers recursively, which are defined as the sum of the two preceding numbers in the sequence, with the first two numbers being 0 and 1.

2. The prime number checker determines if a given number is prime by checking for divisibility by various values up to the square root of the number.

3. The recursive directory traversal function traverses a directory and recursively iterates through all files and subdirectories, printing their paths.

4. The custom table sorting function allows sorting a table by a specific key or by default by the value of the elements.

5. The custom string formatting function provides a flexible way to format strings using variable arguments.

6. The custom error handling function allows catching errors generated by a function call and returning a result or generating an error message.